<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <form
      action="/course/68bb65ea9025a0326c5d0ed9/lesson"
      method="post"
      id="createLessonFor"
      enctype="multipart/form-data"
    >
      <fieldset>
        <figcaption></figcaption>
        <div id="title">
          <label htmlFor="inputTitle">Title</label>
          <input type="text" name="title" id="inputTitle" placeholder="title" />
        </div>
        <div id="description">
          <label htmlFor="inputDescription">Text</label>
          <input type="text" name="text" id="inputText" placeholder="Text" />
        </div>

        <div id="lessonVideo">
          <label htmlFor="inputLessonVideo">Lesson Video</label>
          <input
            type="file"
            name="lessonVideo"
            accept="*"
            id="inputLessonVideo"
            placeholder="Lesson Video"
          />
        </div>

        <div id="lessonFile">
          <label htmlFor="inputLessonFile">Lesson File</label>
          <input
            type="file"
            name="lessonFiles"
            accept="*"
            id="inputLessonFile"
            placeholder="Lesson File"
          />
        </div>
      </fieldset>

      <div className="button-container">
        <button>Submit</button>
      </div>
      <p id="output"></p>
    </form>

    <script>
      const createLessonForm = document.getElementById("createLessonForm");
      const output = document.getElementById("output");

      const inputTitle = document.querySelector("#inputTitle");
      const inputText = document.querySelector("#inputText");
      const inputLessonVideo = document.querySelector("#inputLessonVideo");
      const inputLessonFile = document.querySelector("#inputLessonFile");

      createLessonForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        const formdata = new FormData();

        formdata.append("title", inputTitle.value);
        formdata.append("text", inputText.value);
        // formdata.append("lessonVideo", inputLessonVideo.value);
        // formdata.append("lessonFile", inputLessonFile.value);

        console.log(
          inputTitle.value,
          inputText.value,
          inputLessonVideo.value,
          inputLessonFile.value
        );

        console.log(formdata);
        try {
          let response = await fetch(
            "/course/68bb65ea9025a0326c5d0ed9/lesson",
            {
              method: "POST",
              body: JSON.stringify(formdata)
            }
          );
          let data = await response.json();
          console.log(data);

          // output.textContent = JSON.stringify(data);
        } catch (err) {
          console.error(err);
        }
      });
    </script>
  </body>
</html>
